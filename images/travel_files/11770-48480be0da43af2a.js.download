"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11770],{48506:function(e,t,a){a.d(t,{r:function(){return D},q:function(){return k}});var n=a(81862),i=a(52322),r=a(24862),o=a(62197),l=a(701),c=a(72841),s=a(54711),d=a(97462),u=a(68219),m=a(8930),p=a(94346),f=a(25499),h=a(80777),v=a(90136),_=a(40504),y=a(84691),g=a(94066),x=a(22058),b=a(53880),C=a(21805),T=a(59877),w=(0,a(98116).ZL)()(e=>{var{palette:t,breakpoints:a,tokens:{font:n,color:i,spacing:r}}=e;return{container:{display:"flex",justifyContent:"center",marginTop:21},flexRoot:{display:"flex",flexDirection:"column",alignItems:"center",background:i.white,width:"100%"},subTitle:{fontWeight:n.weight.bold,marginBottom:r.xxs},optionsSection:{display:"flex",flexFlow:"row",marginBottom:r.base,flexGrow:1,marginTop:r.s,[a.down("md")]:{flexFlow:"column"}},backButton:{fontSize:n.size.s,fontWeight:n.weight.bold,marginBottom:r.base},cancelTitle:{fontWeight:n.weight.bold,fontSize:n.size.l},cancelAtEndOfTermContainer:{backgroundColor:"#F3F4F5",padding:r.l,paddingBottom:r.s,display:"flex",flexDirection:"column",width:326,[a.down("sm")]:{backgroundColor:"initial",borderBottom:"1px solid #0c121c1f"}},highlightedContainer:{backgroundColor:"#F3F4F5"},cancelEarlyTitleContainer:{padding:r.l,paddingBottom:r.s,display:"flex",flexDirection:"column",width:326},description:{fontSize:n.size.s,lineHeight:n.lineHeight.s,marginTop:15},total:{fontSize:14,fontWeight:n.weight.bold},item:{fontSize:n.size.s,lineHeight:n.lineHeight.s},items:{display:"flex",flexDirection:"row",justifyContent:"space-between"},hr:{borderColor:"#0c121c1f",width:"100%",marginTop:4},itemPrice:{fontSize:n.size.m},totalPrice:{fontSize:n.size.m,fontWeight:900},taxNote:{fontSize:n.size.xs,fontWeight:n.weight.normal,marginTop:-6,alignSelf:"flex-end"},cancelEndOfTermBtn:{color:t.common.white,backgroundColor:t.secondary.main,"&:hover":{backgroundColor:t.secondary.dark,color:t.common.white},marginTop:r.l,[a.up("md")]:{marginTop:"auto",marginBottom:36}},cancelEarlyBtn:{marginTop:r.l},aboutNote:{fontSize:n.size.s,textDecoration:"underline",marginTop:15,textAlign:"center",cursor:"pointer"}}}),k="Flat fee cancellation",E={usd:40,cad:54,aud:60,eur:37,gbp:31,chf:35,dkk:270,nok:420,sek:430,jpy:5700,inr:3300,krw:53e3,brl:200},N=e=>{var{t,productDueDate:a,productName:n,currentAlottmentExpiration:r,commitmentRemaining:o,helpPath:l,totalCreditsRemaining:c}=e;return{cancelAtEndOfTermTitle:t("cancellation:cancel_at_end_of_term_title"),back:t("back"),continue:t("continue"),aboutNote:t("cancellation:flat_fee_about_cancellation"),taxNote:t("cancellation:flat_fee_tax_note"),remainingFeeText:o>1?t("cancellation:flat_fee_remaining_text_plural",{COUNT:o}):t("cancellation:flat_fee_remaining_text_singular"),flatFeeCost:t("cancellation:flat_fee_cost"),monthlyCostText:t("cancellation:flat_fee_monthly_cost"),totalForEarlyOpt:t("cancellation:flat_fee_total_early"),totalForEndOfTermOpt:(0,i.jsx)(T.cC,{ns:s.ahM,i18nKey:t(o>1?"cancellation:flat_fee_total_end_of_term_plural":"cancellation:flat_fee_total_end_of_term_singular"),values:{COUNT:o}}),orderCreationError:(0,i.jsx)(T.cC,{t:t,ns:s.ahM,i18nKey:"cancellation:flat_fee_order_creation_error",components:{SupportLink:(0,i.jsx)(d.r,{underline:!0,style:{textDecoration:"underline"},clickAnalyticsLabel:"".concat(f.vn4,".").concat(f.Rqe),href:l})}}),cancelAtEndOfTermDescription:(0,i.jsx)(T.cC,{ns:s.ahM,i18nKey:"cancellation:flat_fee_cancel_end_of_term_description",values:{PRODUCT_DUE_DATE:a},components:{bold:(0,i.jsx)("strong",{})}}),cancelEarlyTitle:t("cancellation:cancel_early_title"),pausePlanEarlyCancelationMessage:t("pause_plan_early_cancelation_message"),cancelEarlyDescription:(0,i.jsx)(T.cC,{ns:s.ahM,i18nKey:"cancellation:flat_fee_cancel_early_description",values:{PRODUCT_DUE_DATE:r},components:{bold:(0,i.jsx)("strong",{})}}),technicalIssuesLink:(0,i.jsx)(T.cC,{ns:s.ahM,i18nKey:"cancellation:technical_issues_link",components:{a:(0,i.jsx)(d.r,{href:"/help",target:"_blank",clickAnalyticsLabel:(0,x.U_)({pageSection:f.vn4,eventLabel:f.l4m})})}}),confirmPageTitle:t("cancellation:confirm_page_title",{PRODUCT_NAME:n}),earlyCancelationMessage:(0,i.jsx)(T.cC,{ns:s.ahM,i18nKey:"credit_rollover:early_cancelation_message",values:{TOTAL_CREDITS_REMAINING:c},components:{bold:(0,i.jsx)("strong",{})}})}},D=e=>{var t,{formattedExpirationDate:a,licenseName:d,onSubmit:D,onPrevious:j,plan:O,churnSurveyResults:M,compareCancellationFeeWithMonthlyFee:A=!1}=e,R=(0,y.aQ)(),{classes:z,cx:I}=w(),P=(0,b.ad)(),{t:S}=(0,T.$G)(s.ahM),U=R(new Date(O.subscriptionExpiration)),F=e=>D({action:e}),Z=N({t:S,productName:d,productDueDate:a,currentAlottmentExpiration:U,commitmentRemaining:O.commitmentRemaining,helpPath:P,totalCreditsRemaining:O.totalCreditsRemaining}),B=(0,g.cY)(O.id),L=O.commitmentRemaining<=1,{data:q}=(0,_.K)({productId:m.ue$});if(q){var K,W,H=E.usd<((null===(W=O.product)||void 0===W?void 0:null===(K=W.prices)||void 0===K?void 0:K.usd)||0);A&&H?q.prices=O.product.prices:q.prices=E}var Q=(0,v.LG)({product:q}),G=(null==M?void 0:M.subReason)||(null==M?void 0:M.mainReason)||((null==M?void 0:M.other)?"anything_else":void 0),{createOrderHandler:Y,isCreateOrderInProgress:$,orderStatus:V}=(0,h.Q)({productOverride:q,productId:m.ue$,subscriptionIdentifier:O.id,cancellationReason:k,cancellationReasonName:G}),X=(t=(0,n._)(function*(){L?F("assistedEarlyCancel"):(C.Z.set("pwnext","true",{expires:new Date(new Date().getTime()+864e5)}),Y())}),function(){return t.apply(this,arguments)});return(0,i.jsx)(r.Z,{className:z.container,children:(0,i.jsxs)(r.Z,{component:"div",className:z.flexRoot,children:[(0,i.jsx)(o.Z,{variant:"subtitle1",className:z.subTitle,"data-automation":"CancelPlans_cancelOptionStep",children:Z.confirmPageTitle}),(0,i.jsxs)(r.Z,{className:z.optionsSection,children:[O.autoRenewal&&(0,i.jsxs)(r.Z,{className:z.cancelAtEndOfTermContainer,"data-automation":"cancelAtEndOfTermContainer",children:[(0,i.jsx)(o.Z,{variant:"subtitle1",className:z.cancelTitle,children:Z.cancelAtEndOfTermTitle}),(0,i.jsx)(o.Z,{variant:"body1",className:z.description,children:Z.cancelAtEndOfTermDescription}),(0,i.jsx)(o.Z,{sx:{marginTop:"9px"},variant:"body1",className:z.description,children:Z.remainingFeeText}),(0,i.jsx)(u.z,{clickTrack:(0,x.U_)({pageSection:f.vn4,eventLabel:f.$zE}),onClick:()=>F("turnOffAutoRenewal"),onKeyDown:e=>{"Enter"===e.key&&F("turnOffAutoRenewal")},variant:"contained","aria-label":"Cancel at end of term","data-automation":"cancelAtEndOfTermCTA",className:z.cancelEndOfTermBtn,children:Z.continue})]}),(0,i.jsxs)(r.Z,{className:I(z.cancelEarlyTitleContainer,!O.autoRenewal&&z.highlightedContainer),"data-automation":"cancelEarlyContainer",children:[(0,i.jsx)(o.Z,{variant:"subtitle1",className:z.cancelTitle,children:Z.cancelEarlyTitle}),(null==V?void 0:V.status)===p.cM&&(0,i.jsx)(l.Z,{severity:"error",children:Z.orderCreationError}),B&&(0,i.jsx)(l.Z,{severity:"warning",children:Z.earlyCancelationMessage}),(0,i.jsx)(o.Z,{variant:"body1",className:z.description,children:O.isPaused?Z.pausePlanEarlyCancelationMessage:Z.cancelEarlyDescription}),!L&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.Z,{sx:{marginTop:"62px"},className:z.items,children:[(0,i.jsx)(o.Z,{variant:"body1",className:z.item,children:Z.flatFeeCost}),(0,i.jsx)(o.Z,{variant:"body1",className:z.itemPrice,children:Q})]}),(0,i.jsx)("hr",{className:z.hr}),(0,i.jsxs)(r.Z,{className:z.items,children:[(0,i.jsx)(o.Z,{variant:"body1",className:z.total,children:Z.totalForEarlyOpt}),(0,i.jsx)(o.Z,{variant:"body1",className:z.totalPrice,"data-automation":"cancellationFeeTotalAmount",children:Q})]}),(0,i.jsx)(o.Z,{variant:"body1",className:z.taxNote,children:Z.taxNote})]}),(0,i.jsx)(u.z,{clickTrack:(0,x.U_)({pageSection:f.vn4,eventLabel:f.r25}),disabled:$,onClick:X,onKeyDown:e=>{"Enter"===e.key&&X()},"aria-label":"Cancel early with a fee",variant:"outlined",className:z.cancelEarlyBtn,"data-automation":"cancelEarlyWithFeeCTA",children:$?(0,i.jsx)(c.Z,{color:"inherit",size:24}):Z.continue}),(0,i.jsx)(o.Z,{variant:"body1",className:z.aboutNote,onClick:()=>{window.open("https://support.shutterstock.com/s/article/Does-Shutterstock-charge-any-cancellation-fees","_blank")},children:Z.aboutNote})]})]}),(0,i.jsx)(u.z,{clickTrack:(0,x.U_)({pageSection:f.vn4,eventLabel:f.pPK}),onClick:j,variant:"text",className:z.backButton,children:Z.back})]})})}},80777:function(e,t,a){a.d(t,{Q:function(){return X}});var n,i=a(81862),r=a(57460),o=a(6692),l=a(48506),c=a(8930),s=a(94346),d=a(59100),u=a(61592),m=a(71933),p=a(68668),f=a(27084),h=a(32300),v=a(93332),_=a(9774),y=a(5760),g=a(59625),x=a(72212),b=a(63775),C=a(97956),T=a(72726),w=a(18271),k=a(82124),E=e=>{switch(e.paymentMethod){case y.M2:return{paymentId:e.id,expirationMonth:e.creditCard.expMonth,expirationYear:e.creditCard.expYear,maskedNumber:e.creditCard.maskedNumber,cardType:e.creditCard.type,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case y.Eq:return{paymentId:e.id,bic:e.sepaDirectDebit.bic,maskedIBAN:e.sepaDirectDebit.maskedIban,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case y.YR:return{paymentId:e.id,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit,email:e.email};default:return null}},N=e=>{var{paymentProfiles:t=[]}=e;return Array.isArray(t)&&0!==t.length?E(t.find(e=>!0===e.isDefault)||t[0]):null},D=e=>{var{orderItems:t=[],license:a,country:n,debitableIdentifier:i,selectedShadowsOption:o}=e;return t.map(e=>{var{product:{id:t,eligibleForRebilling:l,seatCount:s}={},productType:d,assets:m,paymentMethod:p,subscriptionIdentifier:f,cancellationReason:h,cancellationReasonName:v}=e,_=f&&h?(0,r._)({subscription_identifier:f,cancellation_reason:h},v&&{cancellation_reason_name:v}):{},w=[];return s&&(_.seat_count=s),(null==p?void 0:p.type)!==y.xt&&(_.subscription_id=null==p?void 0:p.id),(null==m?void 0:m.length)&&(w=m.map(e=>{var{asset:t,selectedAssetSize:n}=e,i=(null==t?void 0:t.type)===C.tn,l=t.overrideAssetTypeForMusicOrder?t.overrideAssetTypeForMusicOrder:(0,T._L)(t);return(0,r._)({type:l,id:t.id,license:a},t.overrideAssetTypeForMusicOrder&&!i&&{format:b.vD,size:b.vD},(null==n?void 0:n.size)&&!i&&{size:n.size},(null==n?void 0:n.format)&&{format:n.format},l===C.IK&&{headline:t.title},l===C.k4&&t.imageType===C.w5&&(0,r._)({angle:t.angle||g.U,content_provider:C._R},(null==n?void 0:n.format)!==x.YU&&{include_shadows:"on"===(o||"on").toLocaleLowerCase()}))})),_.auto_renewal=l&&d===u.Cs&&!c.ikm.includes(n)&&!c.yDj.includes(e.product.name),_.debitable_identifier=i,(0,r._)({product:{id:t,type:d||u.cs}},w&&{media:w},Object.keys(_).length>0&&{meta:_})})},j=e=>{var{currency:t,country:a,paymentProfileId:n,items:i,couponCode:r,vatNumber:o}=e;return{data:{type:"orders",attributes:{currency:t,items:i,country:a,payment_profile_id:n,coupons:r?[{type:"coupon",name:"coupon",coupon_code:r}]:[],client_data:{},vat_override:o||void 0}}}},O=(n=(0,i._)(function*(e){var{country:t,couponCode:a,currency:n,orderItems:i,selectedShadowsOption:r,paymentProfileId:o,vatNumber:l,configs:c={},license:s=u.ur,debitableIdentifier:d,showP32433Cad:m=!1}=e,p=D({orderItems:i,license:s,country:t,debitableIdentifier:d,selectedShadowsOption:r}),f=(0,_.Tn)().formattedUrl,h=j({country:t,couponCode:a,currency:m&&"CAD"||n,items:p,paymentProfileId:o,vatNumber:l});return w.uS.post(f,h,c).then(e=>({headers:e.headers,data:(0,k.O)(e.data)}))}),function(e){return n.apply(this,arguments)}),M=a(49219),A=e=>{var{couponCode:t,productName:a}=e,n=null;return a===c.Pvj&&t===c.XdV?n=c.E65:a===c.fnR&&t===c.Q9B&&(n=c.Em3),n},R=a(42637),z=a(74846),I=a(54947),P=a(3855),S=a(45480),U=a(37485),F=a(88759),Z=a(978),B=a(91072),L=a(28871),q=a(53880),K=a(30708),{NODE_CONFIG_ENV:W}=a(34406).env,H=()=>{var e=(0,K.u4)()?"production":"qa";switch(W||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}},Q=()=>{var e=(0,K.u4)()?"production":"qa";switch(W||e){case"dev":return"65035";case"qa":return"19606";case"production":return"17383";default:return"NO_ENV_DEFINED"}},G=a(21805),Y=a(5632),$=a(2784),V=e=>{var t,{couponCode:a,displayInlineCancellationFlow:n}=e,i=(0,Y.useRouter)(),o=(0,m.v)(),l=!!(null==o?void 0:null===(t=o.current)||void 0===t?void 0:t.isPeacock);return(0,$.useCallback)(e=>{var{orderId:t}=e,o=(0,R.DW)({language:i.locale,relativePath:(0,q.U2)({queryParams:(0,r._)({orderId:t},(null==i?void 0:i.query)||{},l&&{isCreativeAiOrder:"true"},a?{[u.d9]:a,[u.Gp]:a}:{},n&&{display:"inlineCancellationFlow"})})});i.push(o)},[a,l,i,n])},X=e=>{var{products:t,asset:a,assetSize:n,couponCode:m,productId:_,productType:y=u.Cs,productOverride:g,seatCount:x,setCreateOrderStatus:b=()=>{},setIsInvalidCoupon:C=()=>{},vatNumber:w,license:k,isLicenseDrawer:E=!1,preset:D,eligibilityData:j={},existingUserRedirectPath:R,selectedShadowsOption:q,shouldForceAsset:K=!1,subscriptionIdentifier:W,cancellationReason:X,cancellationReasonName:J}=e,{region:ee}=(0,p.PE)(),{isIndiaRegion:et}=(0,S.B)(),{data:ea}=(0,F.jy)(),{data:en}=(0,B.u)(),ei=(0,F.B)(),er=(0,Z.r)(),[eo,el]=(0,$.useState)(!1),[,ec]=(0,L.QD)(a)||[],{eligibilityCurrency:es,debitableIdentifier:ed}=j,eu=(0,$.useMemo)(()=>null!=g?g:(0,r._)({},(0,M.$A)(t,_),x?{seatCount:x}:{}),[g,_,t,x]),em=null==eu?void 0:eu.id,{asPath:ep}=(0,Y.useRouter)(),ef=(0,f.E)({prices:null==eu?void 0:eu.prices}),eh=(0,h.R)(),{data:ev}=(0,I.Z)({shouldFetch:!!ei}),e_=m||eu.couponCode,ey=A({couponCode:e_,productName:null==eu?void 0:eu.name}),eg=(0,P.Sl)({queryParams:(0,r._)({landing_page:(0,z.t)({couponCode:e_,productId:em,vatNumber:w,seatCount:null==eu?void 0:eu.seatCount,doNotRedirect:!0,asset:et||K?a:void 0,existingUserRedirect:R||ec,license:k})},D&&{preset:D}),signUpView:ey}),ex=(0,$.useCallback)(()=>{if(window){var e,t;G.Z.set("referer_page",ep),null===(t=window.NREUM)||void 0===t||null===(e=t.addPageAction)||void 0===e||e.call(t,"UP3-1623 assign loggedOutHandler authRedirectPath to href",(0,o._)((0,r._)({},window.location||{}),{asPath:ep,authRedirectPath:eg})),window.location.href=eg}},[ep,eg]),eb=N({paymentProfiles:ev}),eC=(0,$.useCallback)(e=>{var t,a,n={createTime:null==ea?void 0:ea.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:en.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:null==ea?void 0:ea.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:null==ea?void 0:ea.id,username:null==ea?void 0:ea.username,isLicenseDrawer:E};null===(a=window.NREUM)||void 0===a||null===(t=a.noticeError)||void 0===t||t.call(a,e,n)},[en,ea,E]),eT=V({couponCode:e_,displayInlineCancellationFlow:[l.q].includes(X)}),ew=(0,U.d)(),[ek,eE]=(0,$.useState)({status:"",error:void 0}),eN=(0,$.useCallback)((0,i._)(function*(){try{if(b({status:"",error:void 0}),eE({status:"",error:void 0}),el(!0),et&&c.Tj5.includes(e_))throw Error("free trial offer not available in India");if(ev){var e,t=a?{assets:[{asset:a,selectedAssetSize:(0,v.DW)({assetType:(0,T.Tp)(a),assetSize:n})}]}:{},i=[];X===l.q?i.push({product:{id:Q(),type:"products"},cancellationReason:X,cancellationReasonName:J,subscriptionIdentifier:W}):(i.push((0,o._)((0,r._)({},t),{product:eu,productType:y})),null!=X&&null!=W&&i.push({product:{id:H(),type:"products"},cancellationReason:X,cancellationReasonName:J,subscriptionIdentifier:W}));var{data:m}=yield O({country:ee,currency:es||ef,paymentProfileId:null==eb?void 0:eb.paymentId,orderItems:i,selectedShadowsOption:q,vatNumber:w,couponCode:e_,license:k,debitableIdentifier:ed,showP32433Cad:eh,configs:{headers:{[d.yx]:er}}});b({status:s.MR,error:void 0}),eE({status:s.MR,error:void 0}),el(!1),eT({orderId:m.id}),ew({actionName:"convert - order creation success",customAttributes:{productName:eu.name,productType:y,country:ee,currency:es||ef,assetType:(0,T.Tp)(a),assetSize:n,license:k,isLicenseDrawer:E}})}el(!1)}catch(t){b({status:s.cM,error:t}),eE({status:s.cM,error:t}),el(!1),(null==t?void 0:null===(e=t.detail)||void 0===e?void 0:e.toLowerCase())===u.LQ&&C(!0),eC(t)}}),[b,et,e_,ev,a,n,ee,es,ef,null==eb?void 0:eb.paymentId,eu,y,w,k,ed,eT,ew,E,eC,C,q,W,eh,X,J,er]);return{createOrderHandler:ei?eN:ex,isCreateOrderInProgress:eo,product:eu,orderStatus:ek,createOrderHandlerLoading:ei&&!ev}}},40504:function(e,t,a){a.d(t,{K:function(){return c}});var n=a(9774),i=a(18271),r=a(82124),o=a(3255),l=e=>{var{productId:t}=e;return(0,n.wv)({urlParams:{productId:t}}).formattedUrl},c=e=>{var{productId:t,shouldFetch:a=!0}=e,{data:n,error:c}=(0,o.ZP)(a&&l({productId:t}),e=>i.uS.get(e).then(e=>(0,r.O)(e.data)));return{data:n,loading:!n&&!c,error:c}}}}]);
//# sourceMappingURL=11770-48480be0da43af2a.js.map